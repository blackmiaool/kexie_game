<!DOCTYPE html>
<html>

<head>
    <title>科协浮生记</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="game">
    <meta name="author" content="blackmiaool">
    <link rel="shortcut icon" href="res/UI/monkey.png">
    <link rel="stylesheet" href="css/deep-ui.css" />
    <link rel="stylesheet" href="css/style.css" />    
    <script src="js/poli.js"></script>
    <h5 id="game-first-tip" style="text-align:center;">服务器连接成功，正在拉取JS与CSS~</h5>
</head>

<body ng-controller="RootController" ng-cloak>
    <div id="wrap">
        <div class="scene-wrap hide" >
            <div class="scene" data-scene="bigmap" ng-if="scenes['bigmap']" >

                <div ng-controller="BigmapController" class="top">
                    <img class="big-bg" src="res/System/bigmap.jpg" style="height:540px;" ng-class="{active:active}">
                    <button ng-click="enter(value.text)" ng-repeat="(name,value) in spots" class="btn clickable" ng-class="value.class" ng-style="value" style="position:absolute;">
                        <span class="glyphicon glyphicon-{{value.icon}}"></span>&nbsp;<span ng-bind="name"></span>
                    </button>
                    <button ng-click="goBack()" class="btn btn-primary btn-lg clickable" style="position:absolute;bottom:10px;left:10px;">
                        <span class="glyphicon glyphicon-home"></span>&nbsp;返回
                    </button>
                </div>
            </div>
<div class="scene" data-scene="character" ng-if="scenes['character']" ng-controller="CharacterController">

                <div class="settings-wrap goodness">
                    <label for="" class="title deep-slot">优势</label>
                    <div deep-panel class="settings-content-wrap">
                        <button hover-item="item" hover-kind="character" ng-mousedown="selectItem(item)" ng-repeat="item in res.goodness" ng-class="{disabled:checkDisabled(item)}" class="item deep-btn blue" ng-style='{visibility:item.selecting?"hidden":"visible"}'>
                            <span ng-bind="::item.name"></span>
                            <div class="cost">
                                <img ng-repeat="i in costs[item.cost]" ng-src="{{::res.img.little_star}}" alt="">
                            </div>
                        </button>
                    </div>
                </div>
                <div class="settings-wrap goodness-selecting">
                    <label for="" class="title deep-slot">已选优势</label>
                    <div deep-panel class="settings-content-wrap">
                        <button hover-item="item" hover-kind="character"  ng-mousedown="deSelectItem(item)" ng-repeat="item in res.goodness|toArray |filter:{selecting:true}| orderBy:'index'" class="item deep-btn blue">
                            <span ng-bind="::item.name"></span>
                            <div class="cost">
                                <img ng-repeat="i in costs[item.cost]" ng-src="{{::res.img.little_star}}" alt="">
                            </div>
                        </button>
                    </div>
                </div>
                
                
                
                <div class="settings-wrap weakness">
                    <label for="" class="title deep-slot">劣势</label> 
                    <div deep-panel class="settings-content-wrap">
                        <button hover-item="item" hover-kind="character"  ng-class="{disabled:checkDisabled(item)}" ng-mousedown="selectItem(item)" ng-repeat="item in res.weakness" class="item deep-btn orange" ng-style='{visibility:item.selecting?"hidden":"visible"}'>
                            <span ng-bind="::item.name"></span>
                            <div class="cost">
                                <img ng-repeat="i in costs[-item.cost]" ng-src="{{::res.img.little_star}}" alt="">
                            </div>
                        </button>
                    </div>
                </div>
                <div class="settings-wrap weakness-selecting">
                    <label for="" class="title deep-slot">已选劣势</label>
                    <div deep-panel class="settings-content-wrap">
                        <button hover-item="item" hover-kind="character"  ng-mousedown="deSelectItem(item)" ng-repeat="item in res.weakness|toArray |filter:{selecting:true} | orderBy:'index'" class="item deep-btn orange">
                            <span ng-bind="::item.name"></span>
                            <div class="cost">
                                <img ng-repeat="i in costs[-item.cost]" ng-src="{{::res.img.little_star}}" alt="">
                            </div>
                        </button>
                    </div>
                </div>
                
                
                
                
                <div class="center-area transform-center">
                    <div>点数已用:<span ng-bind="usedPoints"></span></div>
                    <div class="points-remain">点数剩余:<span ng-bind="remainPoints"></span></div>
                    <div class="btn-wrap">
                        <button ng-click="start()" ng-class="{disabled:remainPoints<0}" class="deep-icon green" data-icon="accept"></button>
                        <div class="tip">开始游戏</div>
                    </div>
                    <div class="btn-wrap">
                        <button ng-click="random()" class="deep-icon yellow" data-icon="hammer"></button>
                        <div class="tip">随机</div>
                    </div>
                </div>
                
            </div>
<div class="scene" data-scene="chat" ng-if="scenes['chat']" >

                <div class="chat-wrap"  ng-controller="ChatController">
                
                    <div class="bg" ondragstart="return false;">
                
                    </div>
                    <div class="half-wrap">
                    </div>
                    <div class="text-wrap">
                        <div class="chat-text hide">
                            <p class="chat-content"></p>
                        </div>
                        <div class="name-wrap" style="text-align: left;color:rgb(255,255,255);background-image:url(res/UI/nameBack.png);display:none;">
                
                            <label class="name-content"></label>
                        </div>
                    </div>
                    <div class="mood-wrap">
                        <img src="" alt="" class="mood">
                    </div>
                    <div class="btn-wrap">
                        <div class="chat-btn-group"></div>
                    </div>
                </div>
            </div>
<div class="scene" data-scene="cover" ng-if="scenes['cover']" >

                <div ng-controller="CoverController">
                    <h1 class='logo-title'>科协<span class="float">浮生</span>记<img src="res/monkey/running.gif"/></h1>
                
                    <div class="btns">
                        <button ng-click="start()" class="btn btn-lg btn-primary" id="cover_btn1">开始游戏</button>
                
                        <button ng-click="read()" class="btn btn-lg  btn-default" href="langshenjiao/index.html">读取进度</button>
                
                        <button ng-click="about()" class="btn btn-lg btn-warning">关于游戏</button>
                    </div>
                
                
                </div>
            </div>
<div class="scene" data-scene="home" ng-if="scenes['home']" >

                <div ng-controller="HomeController" class="home-wrap">
                    <span class="basic name">
                        <span class="key"><span class="glyphicon glyphicon-user"></span> 姓名</span>
                        <span class="value" ng-bind="z.basic.name"></span>
                    </span>
                    <span class="basic power">
                        <span class="key"><span class="glyphicon glyphicon-fire"></span> 体力</span>
                        <span class="value">
                            <span class="bg"></span>
                            <span class="fill" ng-style="{width:z.power*10+'%'}"></span>
                            <span class="text" ng-bind="z.power"></span>
                        </span>
                    </span>
                
                    <span class="basic term">
                        <span class="key"><span class="glyphicon glyphicon-calendar"></span> 学期</span>
                        <span class="value" ng-bind="z.time.term | term"></span>
                    </span>
                
                    <span class="basic month">
                        <span class="key">
                            <span class="glyphicon glyphicon-stats"></span> 月份
                        </span>
                        <span class="value">
                                <span class="rotate upon" ng-bind="getMonth(z.time.round+1)" ng-class="{active:ending,transition:endingTransition}"></span>
                        <span class="rotate below " ng-bind="getMonth(z.time.round)" ng-class="{active:ending,transition:endingTransition}"></span>
                        </span>
                    </span>
                
                    <div class="settings clickable" ng-click="openSettings()">
                
                    </div>
                    <div class="action-panel">
                
                        <div ng-controller="HomeSkillController" class="actions-frame action-top-frame skill-select" ng-class="{active:actionPanel=='学习'}">
                            <div ng-click="actionBack()" class="action clickable action-back" data-action="{{::action.name}}">
                
                                <img draggable="false" ng-src="{{::getActionIcon('arrows')}}">
                
                            </div>
                            <div class="skills-wrap">
                                <div class="skill-page">
                                    <div ng-repeat="skill in skills" ng-click="upgradeSkill(skill)" ng-mouseenter="hoverSkill(skill)" ng-mouseleave="stopHoverSkill()" class="skill-wrap">
                                        <div class="skill">
                                            <img draggable="false" ng-src="{{getSkillIcon(skill)}}" alt="" class="skill-icon">
                                            <img draggable="false" ng-src="{{getSkillBg(skill)}}" alt="" class="skill-bg">
                                            <label class="level" ng-bind="z.skill[skill.name].level"></label>
                                        </div>
                                        <label ng-show="z.skill[skill.name].satisfied" class="name" ng-bind="skill.name"></label>
                                    </div>
                                </div>
                            </div>
                            <!--
                            <div class="skill-change-page">
                
                            </div>
                -->
                        </div>
                        <div class="actions-frame class-detail action-top-frame" ng-class="{active:actionPanel=='上课'}">
                            <div ng-click="actionBack()" class="action clickable action-back" data-action="{{::action.name}}">
                
                                <img draggable="false" ng-src="{{::getActionIcon('arrows')}}">
                            </div>
                            <div class="study-info">
                                <div>距期中考试还剩: 4回合</div>
                                <div>当前学习情况: 应该能及格</div>
                            </div>
                            <button ng-click="goClass()" class="btn btn-primary btn-lg go-class">去上课</button>
                        </div>
                        <div class="actions-frame" ng-class="{active:actionPanel}">
                            <div ng-click="doAction(action)" ng-repeat="action in actions" class="action clickable" data-action="{{::action.name}}" ng-class="{disabled:z.power<action.consume}">
                
                                <img draggable="false" ng-src="{{::getActionIcon(action.icon)}}">
                
                                <label ng-bind="::action.name" class="name"></label>
                            </div>
                        </div>
                    </div>
                    <div class="skill-detail" ng-if="selectingSkill">
                        <h5 class="title" ng-bind="selectingSkill.name" ng-if="z.skill[selectingSkill.name].satisfied"></h5>
                        <div class="skill-section" ng-if="z.skill[selectingSkill.name].satisfied">
                            <label class="key">等级: </label>
                            <p class="value" ng-bind="z.skill[selectingSkill.name].level"></p>
                        </div>
                        <div class="skill-section">
                            <label class="key">前置: </label>
                            <p class="value" ng-bind="getPre(selectingSkill)"></p>
                        </div>
                        <div class="skill-section" ng-if="z.skill[selectingSkill.name].satisfied">
                            <label class="key">功能: </label>
                            <p class="value" ng-bind="selectingSkill.des"></p>
                        </div>
                
                    </div>
                    <div ng-controller="StoreController" class="shop-wrap" ng-class="{hide:!show}">
                        <div class="shop-mask home-mask" ng-class="{hide:!show,active:active}">
                    
                        </div>
                    
                    
                    
                        <div deep-panel class="shop-panel " ng-class="{hide:!show,active:active}">
                            <button class="close deep-icon" data-icon="close" ng-click="closeStore()">
                            </button>
                            <button class="checkout clickable deep-btn blue" ng-click="checkout()" ng-class="{poor:poor,disabled:poor}" ng-bind="priceSum<=z.basic.money?'结算':'穷鬼'"></button>
                            <div class="have-money">
                                <span class="glyphicon glyphicon-credit-card"></span> 持有金钱: <span class="money" ng-bind="z.basic.money+'元'"></span>
                            </div>
                            <div class="items-money-sum">
                                <span class="glyphicon glyphicon-shopping-cart"></span> 总计: <span class="price-sum" ng-bind="priceSum+'元'"></span>
                            </div>
                    
                            <div class="center-panel-wrap">
                                <div class="page-select">
                                    <button ng-repeat="page in pages" class="item clickable  deep-slot" ng-class="{active:currentPage==page}" ng-click="setPage(page)" data-page="{{::page}}" ng-bind="page"></button>
                                </div>
                                <div class="bg  deep-darken-panel"></div>
                                <div class="center-panel">
                                    
                                    <div class="items-desc-frame dark-scroll">
                                        <div class="desc-wrap">
                                            <div ng-if="selectingItem" class="desc-wrap1">
                                                <div class="icon-wrap">
                                                    <img class="icon" draggable="false" ng-src="{{getItemIcon(selectingItem,'wheat')}}" alt="">
                                                </div>
                    
                                                <label class="tag name">名称:</label>
                                                <p class="value name" ng-bind="selectingItem.name"></p>
                    
                                                <label ng-if="currentPage=='器件'" class="tag price">原价:</label>
                                                <label ng-if="currentPage=='仪器'" class="tag price">售价:</label>
                                                <p class="value price" ng-bind="selectingItem.price+'元'"></p>
                                                <label class="tag brief">简介:</label>
                                                <p class="value brief" ng-bind="selectingItem.brief"></p>
                                                <label class="tag comment">备注:</label>
                                                <p class="value comment" ng-bind="selectingItem.comment"></p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="list dark-scroll" ng-show="currentPage=='器件'">
                                        <table class="unselectable">
                                            <thead>
                                                <tr>
                                                    <th class="name">名称</th>
                                                    <th class="price">单价</th>
                                                    <th class="cnt">数量</th>
                                                    <th class="have">持有</th>
                    
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr class="item-line" ng-mouseenter="hoverItem(item)" ng-repeat="item in res.items" ng-if="item.buyable=='1'">
                                                    <td ng-bind="item.name"></td>
                                                    <td class="price" ng-bind="item.price|storePrice:cartItems[item.name]:item.kind"></td>
                                                    <td class="cnt">
                                                        <button ng-click="minusItem(item)" class="deep-cnt-btn clickable" ng-disabled="cartItems[item.name]<1"><span class="glyphicon glyphicon-minus"></span></button>
                                                        <span class="value" ng-bind="cartItems[item.name]"></span>
                                                        <button ng-click="addItem(item)" class="deep-cnt-btn clickable"><span class="glyphicon glyphicon-plus"></span></button>
                                                    </td>
                                                    <td class="have" ng-bind="z.item[item.name].cnt"></td>
                    
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <div class="list dark-scroll" ng-show="currentPage=='仪器'">
                                        <table class="unselectable">
                                            <thead>
                                                <tr>
                                                    <th class="name">名称</th>
                                                    <th class="price">售价</th>
                                                    <th class="cnt">购买</th>
                                                    <th class="have">持有</th>
                    
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr class="item-line" ng-mouseenter="hoverItem(device)" ng-repeat="device in res.devices" ng-if="device.buyable=='1'">
                                                    <td ng-bind="device.name"></td>
                                                    <td class="price" ng-bind="device.price"></td>
                                                    <td class="cnt">
                                                        <button ng-click="minusDevice(device)" class="deep-cnt-btn clickable" ng-disabled="cartDevices[device.name]<1"><span class="glyphicon glyphicon-minus"></span></button>
                                                        <span class="value" ng-bind="cartDevices[device.name]"></span>
                                                        <button ng-click="addDevice(device)" class="deep-cnt-btn clickable" ng-disabled="cartDevices[device.name]>0||z.device[device.name].cnt>0"><span class="glyphicon glyphicon-plus"></span></button>
                                                    </td>
                                                    <td class="have" ng-bind="z.device[device.name].cnt"></td>
                    
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                    
                                </div>
                            </div>
                    
                        </div>
                    </div>
                    <div ng-controller="SettingsController" class="settings-wrap"  ng-class="{hide:!show}">
                        <div class="settings-mask home-mask" ng-class="{hide:!show,active:active}">
                        </div>        
                        
                         
                    </div>
                    
                        
                    <div class="action-show" ng-show="showMonkey">
                        <img ng-src="{{monkey}}" class="monkey">
                    </div>
                
                    <div class="time-wrap">
                        <div class="icon"></div>
                        <div class="progress-wrap">
                            <div class="pro"></div>
                        </div>
                    </div>
                    
                    
                    
                
                    <!--
                   
                
                    <div class="" id="home-main-tab">
                        <button ng-repeat="(key,value) in list" class="desk-frame-nav-a btn {{(value.title==tab_selecting && 'active')}}" ng-click="tab_select(value.title,value.name)">
                            {{key}}<span class="badge {{value.state}}" style="vertical-align: 25%;  margin-left: 5px;  margin-right: -10px;">{{value.content}}</span>
                        </button>
                    </div>
                
                    <div id="system-setting" class="btn-group">
                        <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-expanded="false"><span class="glyphicon glyphicon-wrench" aria-hidden="true"></span>&nbsp;系统<span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu" role="menu" style="min-width:0px;">
                            <li><a href="#">设置</a></li>
                            <li id="scene-home-btn-save"><a href="#" ng-click="home_save()">存档</a></li>
                            <li id="scene-home-btn-load"><a href="#" ng-click="home_load()">读档</a></li>
                            <li class="divider"></li>
                            <li><a href="#">关于</a></li>
                        </ul>
                    </div>
                
                
                
                    <div ng-controller="danmu_controller" id="div-danmu">
                        <div ng-repeat="danmu in data" class="{{($last)&&'danmu_bg'}}" ng-init="enter(danmu,$id)" style="display:none;">
                            <label class="danmu-out" style="background-color:steelblue;display:none;">
                                &nbsp;
                                <label class="danmu-in" style="display:none;">
                                    {{danmu.text}}
                                </label>
                            </label>
                        </div>
                    </div>
                -->
                    <!--    <div class="mask"></div>-->
                </div>
            </div>
<div class="scene" data-scene="make" ng-if="scenes['make']" ng-controller="MakeController">

                <div class="center top-block" deep-panel>
                    <header deep-header="工作台">
                    </header>
                    <main>
                        <div ng-show="phase=='empty'" class="main-content" data-phase="ready-to-make">
                            <button ng-click="start()" ng-class="{'disabled':!checkMaterial()}" class="deep-btn blue lg start-build">搭建框架</button>
                            <section>
                                <header deep-dbline-header="消耗材料"></header>
                                <main>
                                    <div hover-item="m" hover-kind="item" ng-show2="print(m.cnt,z.item[m.name].cnt)" class="item" deep-item-icon="{{getItemIcon(res.items[m.name],'wheat')}}" ng-repeat="m in res.products[workingKind].material" deep-cnt="{{z.item[m.name].cnt+'/'+m.cnt}}" deep-name="{{m.name}}" class="material" deep-judge="m.cnt<=z.item[m.name].cnt">
                
                                    </div>
                                </main>
                            </section>
                            <section>
                                <header deep-dbline-header="消耗体力"></header>
                                <main>
                                    <span ng-bind="powerConsume"></span>
                                </main>
                            </section>
                            <!--
                            <section class="extension">
                                <header deep-dbline-header="扩展方向">
                                </header>
                                <main>
                
                                    <label ng-repeat="(name,dir) in extensions" deep-select="extensions[name]">{{name}}</label>
                                </main>
                            </section>
                -->
                        </div>
                        <div ng-if="phase=='making'" class="main-content" data-phase="making" ng-controller="GameController">
                        
                        <div class="game-wrap   deep-darken-panel" ng-style="{width:(columns.length+1)*gr,height:(rows.length+1)*gr}">
                            <div ng-repeat="column in columns" class="column" ng-style="{'left':gr*($index+1)+'px'}">
                        
                            </div>
                            <div ng-repeat="row in rows" class="row" ng-style="{'top':gr*($index+1)+'px'}">
                        
                            </div>
                        </div>
                        </div>
                    </main>
                </div>
                
                <div class="left top-block">
                    <button ng-click="goScene('home')" class="deep-icon go-back" data-icon="left"></button>
                    <button ng-click="goScene('state')" class="deep-icon go-state yellow" data-icon="profile"></button>
                    <div class="info-block">
                        <header>当前制作</header>
                        <main deep-normal-item="workingKind" class=" solid">
                
                        </main>
                    </div>
                    <div class="info-block">
                        <header>体力</header>
                        <main class="deep-power darkred" deep-power="z.power" deep-max="z.powerMax">
                        </main>
                    </div>
                    <div class="info-block">
                        <header>行动力</header>
                        <main class="deep-power blue" deep-power="z.game.move" deep-max="3" deep-text="{{z.game.move}}(+{{z.game.increase}})">
                        </main>
                    </div>
                    <div class="info-block">
                        <header>性能</header>
                        <main class="deep-power thin darkgreen" deep-power="working.props[0]" deep-max="100" deep-text="working.props[0]">
                        </main>
                    </div>
                    <div class="info-block">
                        <header>稳定</header>
                        <main class="deep-power thin darkgreen" deep-power="working.props[1]" deep-max="100" deep-text="working.props[1]">
                        </main>
                    </div>
                    <div class="info-block">
                        <header>创新</header>
                        <main class="deep-power thin darkgreen" deep-power="working.props[2]" deep-max="100" deep-text="working.props[2]">
                        </main>
                    </div>
                    
                    
                    
                    <div class="btn-wrap">
                        <button ng-click="goScene('make-select')" class="deep-btn green sm change-target">选择制作物品</button>
                        <button ng-click="goScene('make-select')" class="deep-btn orange sm disslove">分解</button>
                    </div>
                </div>
                
                <div class="right top-block" deep-panel>
                    <div class="section">
                        <header deep-dbline-header="相关技能"></header>
                        <main>
                            <div ng-repeat="skill in res.products[workingKind].skill" class="skill">
                
                                <div ng-mouseenter="hoverSkill(skill)" ng-mouseleave="stopHoverSkill()" class="skill-wrap">
                                    <div class="deep-item-icon">
                                        <img draggable="false" ng-src="{{getSkillIcon(skill.name)}}" class="skill-icon">
                                    </div>
                                    <!--
                                    <div class="skill">
                                        <img draggable="false" ng-src="{{getSkillIcon(skill.name)}}" alt="" class="skill-icon">
                                        <img draggable="false" ng-src="{{getSkillBg(skill.name)}}" alt="" class="skill-bg">
                                        <label class="level" ng-bind="z.skill[skill.name].level"></label>
                                    </div>
                -->
                                    <label class="name" ng-bind="skill.name"></label>
                                </div>
                            </div>
                            <div ng-repeat="skill in res.products[workingKind].extSkill" class="skill">
                                <div ng-mouseenter="hoverSkill(skill)" ng-mouseleave="stopHoverSkill()" class="skill-wrap">
                                    <div class="deep-item-icon">
                                        <img draggable="false" ng-src="{{getSkillIcon(skill.name)}}" alt="" class="skill-icon">
                                    </div>
                                    <label class="name" ng-bind="skill.name"></label>
                                </div>
                                <!--
                                <div ng-mouseenter="hoverSkill(skill)" ng-mouseleave="stopHoverSkill()" class="skill-wrap">
                                    <div class="skill">
                                        <img draggable="false" ng-src="{{getSkillIcon(skill.name)}}" alt="" class="skill-icon">
                                        <img draggable="false" ng-src="{{getSkillBg(skill.name)}}" alt="" class="skill-bg">
                                        <label class="level" ng-bind="z.skill[skill.name].level"></label>
                                    </div>
                                    <label class="name" ng-bind="skill.name"></label>
                                </div>
                -->
                            </div>
                        </main>
                    </div>
                    <div class="section">
                        <header deep-dbline-header="相关仪器"></header>
                        <main>
                            <div ng-repeat="instrument in res.products[workingKind].instrument" class="instrument">
                                <div class="left-header">
                                    <div class="deep-item-icon item-icon">
                                        <img ng-src="{{getItemIcon(instrument,'wheat')}}" alt="">
                                    </div>
                                    <span ng-bind="instrument" class="name"></span>
                                </div>
                
                            </div>
                            <div ng-repeat="instrument in res.products[workingKind].extInstrument" class="ext-instrument">
                                <div class="left-header">
                                    <div class="deep-item-icon  item-icon">
                                        <img ng-src="{{getItemIcon(instrument,'wheat')}}" alt="">
                                    </div>
                                    <span ng-bind="instrument" class="name"></span>
                                </div>
                
                            </div>
                        </main>
                    </div>
                </div>
                <!--
                        <img draggable="false" ng-src="{{::img.red_header}}" class="header">
                            <span class="header unselectable" ng-bind="selectingProductKind||'制作'" ng-class="{little:selectingProductKind}"></span>-->
                <!--  强化方向 每次强化选择花费的体力?小游戏?如何决定强化策略? 相关技能 哪些影响? 相关材料 失败率? 相关仪器 额外的仪器带来额外的收益?熟练度? 腐烂? 先完成基础部分搭建然后选择强化方向? 面板: 选择产品 制造详情 当前制作 产品:一开始有一段固定条,表示基础部分.开工前可以选择基础部分的方向(创新\性能\稳定).开工后-->
            </div>
<div class="scene" data-scene="make-select" ng-if="scenes['make-select']" >

                <div ng-controller="MakeSelectController" class="make-wrap">
                    
                
                    <div deep-panel class="select-target">
                        <header deep-header="{{selectingProductKind||'制作'}}" ng-class="{little:selectingProductKind}" class="header">            
                        </header>
                        <main class="red-scroll-shadow-wrap">
                            <div class="red-scroll page" data-page="0" ng-class="{left:productSelectPageIndex>0,center:productSelectPageIndex==0,right:productSelectPageIndex<0}">
                                
                                <div deep-normal-item="product.name" ng-click="selectProductKind(product)" ng-repeat="product in res.products" class=" product clickable bold">
                                </div>
                            </div>
                            <div class="red-scroll page" data-page="1" ng-class="{left:productSelectPageIndex>1,center:productSelectPageIndex==1,right:productSelectPageIndex<1}">
                               <div ng-click="goScene('make',selectingProductKind)" data-deep-btn="blue" class="deep-btn start-new-product">开个新坑</div> 
                                <div deep-normal-item="work | workPrefix" ng-click="goScene('make',selectingProductKind,work.id)" ng-repeat="work in z.work[selectingProductKind]" class="work clickable">
                                </div>
                            </div>
                        </main>
                        <div ng-if="productSelectPageIndex==0" class="deep-icon go-back " data-icon="home" ng-click="goHome()"></div>
                        <div ng-if="productSelectPageIndex==1" class="deep-icon go-back " data-icon="left"  ng-click="productSelectPrevPage()"></div>
                    </div>
                    <main>
                        <div class="make-progress"></div>
                
                    </main>
                
                
                
                </div>
            </div>
<div class="scene" data-scene="preload" ng-if="scenes['preload']" >

                <div class="wrap">
                    <img src="res/System/loading.gif" alt="" class="loading-img">
                    <div class="progress" style="width:960px;">
                        <div id="preload_progress_bar" min-width="2em" class="progress-bar" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 0%;">
                        </div>
                    </div>
                </div>
            </div>
<div class="scene" data-scene="save" ng-if="scenes['save']" ng-controller="SaveController">

                <button ng-click="goScene('home')" class="deep-icon go-back" data-icon="left"></button>
                <div deep-panel class="select-save">
                    <header deep-header="{{title}}" class="header">
                    </header>
                    <main>
                        <button deep-normal-item="getLabel(save)" ng-repeat="save in saves track by $index" ng-click="handle($index)" class="deep-normal-item  btn-save">
                            
                        </button>
                    </main>
                    
                </div>
            </div>
<div class="scene" data-scene="state" ng-if="scenes['state']" >

                <div ng-controller="StateController" class="wrap">
                    <div ng-click="back()" draggable="false" title="返回" class="back">    </div>
                    <div class="page-select-wrap" ng-init="currentPage='物品'">
                
                        <div ng-repeat="page in pages" class="page-select" ng-class="{active:currentPage==page.name}"  ng-click="setPage(page.name)">
                            <img ng-src="{{::res.img.blue_btn}}" alt="" class="bg">
                            <div ng-click="setPage(page.name)" class="select solid {{page.class}} unselectable"  ng-bind="::page.name">
                                <button class="cover" ng-click="setPage(page.name)"></button>
                            </div>
                        </div>
                    </div>
                
                    <div ng-controller="StatusController" class="page" data-page="status" ng-show="currentPage=='状态'">
                       <div class="money" ng-bind="'金钱: '+z.basic.money"></div>
                               <div class="analog" title="模拟电路能力"><img ng-src="{{img.state_analog}}" alt=""><span class="value">234</span></div>
                               <div class="digital" title="数字电路能力"><span class="value">666</span><img ng-src="{{img.state_digital}}" alt=""> </div>
                               <div class="basic-wrap">
                                   <span class="basic">
                                   <span class="key"><span class="glyphicon glyphicon-user"></span> 姓名</span>
                                   <span class="value" ng-bind="z.basic.name"></span>
                                   </span>
                                   <span class="basic">
                                   <span class="key"><span class="glyphicon glyphicon-star"></span> 职位</span>
                                   <span class="value" ng-bind="z.basic.title"></span>
                                   </span>
                                   <span class="basic">
                                   <span class="key"><span class="glyphicon glyphicon-king"></span> 阵营</span>
                                   <span class="value">绝对中立</span>
                                   </span>
                               </div>
                               <div class="props-wrap">
                                   <span class="prop" ng-repeat="key in ['焊接','论文','声望','道德','秩序']">
                               <span class="key"><span class="glyphicon" ng-class="{'glyphicon-save':key=='焊接','glyphicon-file':key=='论文','glyphicon-fire':key=='声望','glyphicon-heart':key=='道德','glyphicon-leaf':key=='秩序'}"></span> <span ng-bind="key"></span></span>
                                   <span class="value" ng-bind="z.prop[key]"></span>
                                   </span>
                               </div>        
                    </div>
                    <div ng-controller="SkillController" class="page" data-page="skill" ng-show="currentPage=='技能'">
                        <div class="table-wrap highlight">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>技能</th>
                                        <td>等级</td>
                                        <td>依赖</td>
                                        <!--                        <td>操作</td>-->
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="v in skills" title="{{::v.des}}">
                                        <th ng-bind="::getSkillName(v)"></th>
                                        <td ng-bind="v.level+' ('+(v.level | skillLevel)+')'"></td>
                                        <td ng-bind="::getPre(v)"></td>
                                        <!--                        <td><button class="ym-button ym-black">升级</button></td>-->
                                    </tr>
                                </tbody>
                            </table>
                        </div> 
                
                    </div>
                    <div ng-controller="PeopleController" class="page" data-page="people" ng-show="currentPage=='朋友'">
                        <div class="desc-wrap">
                            <img ng-src="{{currentP.half}}" alt="" class="currentP">
                        </div>
                        <div class="select">
                            <div ng-show="p.identity=='teammate'" ng-click="setP(p)" ng-repeat="p in pp" class="pp-select clickable">
                                <img ng-src="{{p.half}}" alt="" class="head clickable">
                            </div>
                        </div>
                    </div>
                    <div ng-controller="ItemController" class="page" data-page="item" ng-show="currentPage=='物品'">
                        <div class="kind-wrap">
                            <div ng-click="setItemKind(kind.name)" ng-repeat="kind in itemKinds" class="item-kind-select clickable" ng-class="{active:currentItemKind==kind.name}">
                                <img draggable="false" ng-src="{{::kind.icon}}.svg" alt="">
                                <div class="name" ng-bind="::kind.name"></div>
                            </div>
                        
                        </div>
                        <div class="items-frame">
                            <img draggable="false" ng-src="{{img.items_frame}}" class="bg">
                            <div class="items-wrap">
                                <div ng-click="selectItem(item)" ng-repeat="item in items" ng-if="currentItemKind==item.kind" class="item-wrap clickable">
                                    <div class="item-body-wrap">
                                        <img draggable="false" ng-src="{{::getItemIcon(item,'blue')}}" class="item-icon">
                                        <label class="cnt" ng-bind="item.cnt"></label>
                                    </div>
                        
                                    <label class="name" ng-bind="item.name"></label>
                        
                                </div>
                        
                            </div>
                        </div>
                        
                        <!--item_desc_bg.png-->
                        <div class="items-desc-frame">
                            <img draggable="false" ng-src="{{res.img.items_desc_frame}}" class="bg">
                            <div class="desc-wrap">
                                <div ng-if="selectingItem" class="desc-wrap1">
                                    <div class="icon-wrap">
                                        <img draggable="false" ng-src="{{getItemIcon(selectingItem,'white')}}" alt="">
                                    </div>
                        
                                    <label class="tag name">名称:</label>
                                    <p class="value name" ng-bind="selectingItem.name"></p>
                                    <label class="tag cnt">数量:</label>
                                    <p class="value cnt" ng-bind="selectingItem.cnt"></p>
                                    <label class="tag brief">简介:</label>
                                    <p class="value brief" ng-bind="selectingItem.brief"></p>
                                    <label class="tag comment">备注:</label>
                                    <p class="value comment" ng-bind="selectingItem.comment"></p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div ng-controller="StoryController" class="page" data-page="story" ng-show="currentPage=='经历'">
                        
                    </div>
                
                
                </div>
            </div>
           
            <button ng-click="openDebugPanel()" class="debug btn btn-primary">调试</button>
                        <div class="debug-panel" ng-if="showDebug">
                            <button ng-repeat="sceneName in scenePaths" class="go-scene btn btn-primary" ng-bind="sceneName" ng-click="debugScene(sceneName)"></button>
                        </div>
            <div class="hover-card-wrap" hover-card="character">
                            <div class="hover-card">
                                <div class="summary" ng-bind="hovering.summary"></div>
                                <div class="effect" ng-bind="hovering.effect"></div>
                            </div>
                        </div>
            <div class="hover-card-wrap" hover-card="item" >
                            <div class="hover-card">
                                <div class="row name hide">
                                    <label class="key">名称:</label>
                                    <p class="value" ng-bind="hovering.name"></p>
                                </div>
                                <div class="row kind">
                                    <label class="key">类型:</label>
                                    <p class="value" ng-bind="res.items[hovering.name].kind"></p>
                                </div>
                                <div class="row has">
                                    <label class="key">持有数:</label>
                                    <p class="value" ng-bind="z.item[hovering.name].cnt"></p>
                                </div>
                                <div class="row brief">
                                    <label class="key">简介:</label>
                                    <p class="value" ng-bind="res.items[hovering.name].brief"></p>
                                </div>                    
                                <div class="rwo comment">
                                    <label class="key">备注:</label>
                                    <p class="value" ng-bind="res.items[hovering.name].comment"></p>
                                </div>
                            </div>
                        </div>            
        </div>
    </div>
    <script data-main="js/main" src="js/require.js"></script>
    <script src="http://localhost:35728/livereload.js?ext=Chrome&extver=2.1.0"></script>
</body>

</html>